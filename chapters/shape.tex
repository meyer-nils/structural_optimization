\chapter{Shape optimization}

So far, we have performed size optimization by adjusting the cross sectional areas of truss systems in Section \ref{sec:standard_truss_problem} or by adjusting the thickness distribution of a sheet in Section \ref{sec:variable_thickness_sheet}. 
We have performed topology optimization by allowing trusses to disappear in Example \ref{ex:largetrussoptimizationexample} and by finding binary material distributions in 2D sheets using SIMP in Section \ref{sec:simp}.
However, the node positions remained fixed in all these cases. 

In this chapter, we want to optimize the position of nodes for a fixed topology and fixed size parameters like cross sectional area or thickness.

\begin{objectives}{}{objectives_shape}
After studying this chapter and finishing the exercise, you should be able to 
\begin{itemize}[label=$\dots$]
    \item 
\end{itemize}
\end{objectives}

\section{Trusses}

The truss shape optimization problem may be denoted as follows:

\begin{equation}
    \begin{aligned}
        \min_{\mathbf{x}} \quad & C(\mathbf{x}) = \mathbf{f} \cdot \mathbf{u}(\mathbf{x})\\
        \textrm{s.t.} \quad & g(\mathbf{x}) = \mathbf{a} \cdot \mathbf{l}(\mathbf{x}) - V_0 \le 0  \\
                            & \mathbf{x} \in \mathcal{X}\\
    \end{aligned}
    \label{eq:shape_optimization}
\end{equation}

Both, the target function $C(\mathbf{x})$ and the constraint $g(\mathbf{x})$, are in general non-linear coupled functions. Hence, we apply MMA to both functions to get sequential convex explicitly separable approximations. We can denote the Lagrangian of the approximated functions as 
\begin{align}
    \mathcal{L}(\mathbf{x}, \mu) &= \tilde{C}(\mathbf{x}) + \mu \tilde{g}(\mathbf{x}) \\
    &= \mathcal{L}_0 + \sum_j \frac{p_j^k}{}
\end{align}





\begin{equation}
    \frac{\partial \mathcal{L} (\mathbf{x}, \mu)}{\partial x_i} 
    = \frac{\partial C (\mathbf{x})}{\partial x_i} + \mu \mathbf{a} \cdot \frac{\partial \mathbf{l}(\mathbf{x})}{\partial x_i}
    \label{eq:lagrange_truss_shape_problem}
\end{equation}